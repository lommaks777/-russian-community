# Тестирование проекта "Русская карта БА"

Этот набор тестов проверяет функциональность веб-приложения "Русская карта Буэнос-Айреса".

## Структура тестов

- `test_utils.js` - Извлеченные функции из проекта для тестирования
- `test_data.js` - Мок-данные для тестирования
- `test_suite.js` - Основной набор тестов
- `package.json` - Конфигурация для запуска тестов

## Запуск тестов

```bash
# Перейти в папку с тестами
cd test

# Установить зависимости (опционально)
npm install

# Запустить тесты
npm test
```

Или напрямую:

```bash
node test_suite.js
```

## Покрытие тестами

### ✅ Протестированные компоненты:

1. **Функции карты (map.js, index.html):**
   - `withKeyForPlacesMedia()` - добавление API ключа к URL фото
   - Инициализация карты и обработка данных мест

2. **Функции событий (events.html):**
   - `emojiFor()` - получение эмодзи для тегов событий
   - `whenText()` - форматирование времени событий
   - `upcomingOnly()` - фильтрация прошедших событий
   - `filtered()` - фильтрация событий по критериям

3. **Функции формы добавления (add.html):**
   - `clearForm()` - очистка формы
   - `buildJson()` - создание JSON объекта из формы

4. **Функции обработки событий (build_events.mjs):**
   - `tagify()` - определение тегов событий
   - `priceFrom()` - извлечение информации о цене
   - `firstSentences()` - сокращение текста

5. **Структуры данных:**
   - Валидация структуры объектов мест (PLACES)
   - Валидация структуры событий (EVENTS)
   - Проверка корректности полей

## Результаты тестирования

Все тесты проходят успешно:

- ✅ **withKeyForPlacesMedia**: Корректно добавляет API ключ к URL Google Places
- ✅ **emojiFor**: Правильно возвращает эмодзи для тегов событий
- ✅ **whenText**: Корректно форматирует время событий
- ✅ **upcomingOnly**: Фильтрует прошедшие события
- ✅ **filtered**: Фильтрует события по тегам, цене и поиску
- ✅ **clearForm**: Корректно очищает поля формы
- ✅ **buildJson**: Создает правильную JSON структуру
- ✅ **tagify**: Определяет теги из текста на разных языках
- ✅ **priceFrom**: Извлекает информацию о цене
- ✅ **firstSentences**: Сокращает текст до нужной длины
- ✅ **dataStructure**: Проверяет корректность структур данных

## Особенности тестирования

1. **Многоязычность**: Тесты проверяют обработку текста на русском, испанском и английском языках
2. **Временные зоны**: Тесты учитывают работу с датами и временем
3. **API интеграция**: Проверяется корректность работы с Google Places API
4. **Фильтрация данных**: Тестируется логика фильтрации событий и мест
5. **Валидация данных**: Проверяется структура и типы данных

## Рекомендации

1. Запускайте тесты после каждого изменения в коде
2. Добавляйте новые тесты при добавлении новой функциональности
3. Проверяйте покрытие тестами критически важных функций
4. Используйте мок-данные для тестирования без внешних зависимостей

